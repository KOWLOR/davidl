<!DOCTYPE html><html lang=fr xmlns:fb="https://www.facebook.com/2008/fbml" xmlns:og="http://ogp.me/ns#"><head><meta charset=utf-8 /><meta content="width=device-width" name=viewport /><meta content="IE=edge" http-equiv=X-UA-Compatible /><title>Migration de wordpress vers ruby on rails et middleman</title><meta content="" name=description /><meta content="index,follow" name=robots /><meta content="DavidL design + développement" property="og:site_name"/><meta content=website property="og:type"/><meta content="http://davidl.fr" property="og:url"/><meta content="Migration de wordpress vers ruby on rails et middleman" property="og:title"/><meta content="" property="og:description"/><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" property="og:image"/><meta content="DavidL design + développement" name="twitter:card"/><meta content="@_flexbox" name="twitter:site"/><meta content="Migration de wordpress vers ruby on rails et middleman" name="twitter:title"/><meta content="" name="twitter:description"/><meta content="David Leuliette" name="twitter:creator"/><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" name="twitter:image:src"/><meta content="http://davidl.fr" name="twitter:domain"/><meta content="Migration de wordpress vers ruby on rails et middleman" itemprop=name /><meta content="" itemprop=description /><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" itemprop=image /><link href="https://plus.google.com/u/0/113401424510170217860" rel=publisher /><link href="/feed.xml" rel=alternate title="DavidL design + développement" type="application/rss+xml"/><link href="/apple-touch-icon.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-57x57-precomposed.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-60x60-precomposed.png" rel=apple-touch-icon sizes=60x60 /><link href="/apple-touch-icon-72x72-precomposed.png" rel=apple-touch-icon sizes=72x72 /><link href="/apple-touch-icon-76x76-precomposed.png" rel=apple-touch-icon sizes=76x76 /><link href="/apple-touch-icon-114x114-precomposed.png" rel=apple-touch-icon sizes=114x114 /><link href="/apple-touch-icon-120x120-precomposed.png" rel=apple-touch-icon sizes=120x120 /><link href="/apple-touch-icon-144x144-precomposed.png" rel=apple-touch-icon sizes=144x144 /><link href="/apple-touch-icon-152x152-precomposed.png" rel=apple-touch-icon sizes=152x152 /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><meta content="#f5f5f5" name=msapplication-TileColor /><meta content="/mstile-144x144.png" name=msapplication-TileImage /><link href="../assets/stylesheets/application-dd1bc553.css" media=screen rel=stylesheet /><link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" media=screen rel=stylesheet /><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-46684635-1']);
_gaq.push(['_trackPageview']);</script></head><body><div class=off-canvas-wrap data-offcanvas=""><div class=inner-wrap><div class=m-content><div class="m-header is-hidden"><div class=row><div class="medium-12 columns"><a class="right-off-canvas-toggle button animate right" href="#">Menu</a></div></div></div><aside class=right-off-canvas-menu><ul class=off-canvas-list><li><a class=m-control--logo href="/"><div class="picto-triforce left"></div><span class=left>David L</span></a></li><li><a href="/blog">Blog</a></li><li><a href="/about.html">À propos</a></li><li><a href="/contact.html">Contact</a></li><li><label>Ressources </label></li><li><a href="/forge"><i class="i-custom fa fa-book"></i>FORGE </a></li><li><a href="/webdesign.html">Responsive design </a></li><li><a href="/books.html">Bibliothèque </a></li><li><a href="/manifesto.html">Manifeste </a></li><li><a href="/toolkit.html">Outils </a></li></ul></aside><section class=m-masterhead--background><div class=row id=top><div class="medium-12 columns"><h1 class=m-masterhead>J'ai quitté wordpress, Pourquoi ? Comment ?</h1><a href="#js-content"><i class="fa fa-4x fa-angle-down"></i></a></div></div></section><div id=js-content></div><div class=row><div class="medium-2 medium-offset-10 columns"><p class=m-post-list--calendar><i class="fa fa-calendar i-custom fa-lg"></i><span class=l-day>14</span>.<span class=l-month>04</span>.<span class=l-year>2014</span></p></div></div><article class=row itemscope="" itemtype="http://schema.org/BlogPosting"><div class="medium-8 medium-centered columns blog-article" itemprop=articleBody><p>Depuis quelque temps maintenant j’ai dit <a href="//lesjoiesducode.fr/post/78835971429/quand-lintegrateur-veut-toucher-au-php">au revoir à wordpress</a> et bonjour à middleman. J'ai décidé de m'éloigner de Wordpress, car je me retrouvais souvent à livrer bataille avec l’interface d'administration et le flux de travail de publication, juste pour faire des choses simples.</p> <p>Travailler avec le tinymce et le <code>HTML</code> fonctionne plutôt bien, mais je trouve que l'écriture en <code>Markdown</code> est beaucoup plus simple et <a href="//fr.wikipedia.org/wiki/Environnement_pervasif">pervasive</a>. Je passais mon temps à enlever des fonctionnalités, mettre à jour et installer des modules qui par dizaines en utilisant finalement 30% des fonctionnalités.</p> <p>J'ai donc quitté le monde Wordpress et <code>php</code> pour travailler en Ruby on Rails avec un générateur de site statiques : <a href="//middlemanapp.com/">middleman</a>.</p> <h2 id=les-avantages>Les avantages</h2> <h3 id=rapidit-dcriture>Rapidité d’écriture</h3> <p>Personnellement voici mon workflow pour publier du contenu.</p> <ul> <li>J’écris en markdown avec evernote (Généralement depuis ma tablette).</li> <li>Je passe sur un ordinateur fixe pour gérer les medias images.</li> <li>Je déploie depuis mon ordinateur portable.</li> </ul> <p>L’interface de wordpress est un bonne chose et propose <s>énormément</s>, beaucoups trop d’options pour moi. Trop de solicitations qui au final perturbent votre flux de production de contenu. Un peu comme windows vous passez votre temps à protéger le système contre lui-même au lieu de travailler de façon efficace.</p> <h3 id=rapidit-du-site>Rapidité du site</h3> <p>C’est simple : un site web statique se charge plus vite qu’un site hébergé sous wordpress. <a href="https://twitter.com/ABrisset">@abrisset</a> a fait l’expérience et chiffre à l’appui voici le résultat :</p> <p><img alt="migration wordpress - ruby on rails" src="https://farm4.staticflickr.com/3724/13851401935_98a7267d54_o.png"/></p> <p><em>Le site se charge 10 fois plus vite</em>.</p> <h3 id=pas-de-base-de-donnes>Pas de base de données</h3> <p>Pas de configuration, pas de système complexes, pas de hack possible en accédant à <code>/wp-admin/</code>. Travailler sur différents environnements est d'une simplicité déconcertante avec un <code>git clone nom-du-projet</code>.</p> <p>La base de données est remplacé par de simples fichiers textes <code>.yml</code> pour la configuration ou <code>.markdown</code> pour le contenu.</p> <h3 id=contrle-du-code>Contrôle du code</h3> <p>Wordpress est une bonne solution, mais niveau architecture du code et maintenance c’est juste le chaos le plus complet. On bourre tout dans <code>function.php</code> et on verra après.</p> <p>Comme tout le monde :</p> <ul> <li>J'ai téléchargé un thème pour le modifier et me rendre compte qu'au final je n'avais besoin que de 10% des fonctionnalités offertes.</li> <li>Je suis passé par la case framework de thèmes pour wordpress, qui au final complexifiait l'architecture.</li> <li>Ma dernière expérience fut d'utiliser <a href="//underscores.me/">underscore</a> (Un boilerplate simple de thème). Mais les performances n'étaient pas au rendez-vous.</li> </ul> <p>Finalement j'ai <a href="//middlemanapp.com/">middleman</a> qui embarque de base <a href="//sass-lang.com/">Sass</a>, <a href="//coffeescript.org/">CoffeeScript</a> et juste ce qu'il faut de <a href="//rubyonrails.org/">Ruby on Rails</a>. Je passe mon temps à construire des choses. Contrairement à wordpress où je passais mon temps à faire des <em>dirty hacks</em>.</p> <h3 id=historique-des-version>Historique des version</h3> <p>Avec git, vous avez à votre disposition une machine à remonter le temps. Vous pouvez voir toutes vos modifications, créer des branches, tester des fonctionnalités et revenir en arrière facilement si cela ne fonctionne pas. Cela demande une certaine gymnatisque au début, mais impossible de revenir en arrière dès que l'on a commencé à comprendre comment cela fonctionne vraiment.</p> <h3 id=en-rsum>En résumé</h3> <ul> <li><strong>Markdown</strong> pour l'écriture.</li> <li><strong>Slim</strong> pour le templating HTML.</li> <li><strong>Sass</strong> en préprocesseur CSS.</li> <li><strong>CoffeeScript</strong> pour la compilation du JavaScript.</li> <li><strong>Git</strong> pour la gestion des fichiers.</li> <li><strong>Terminal</strong> pour <em>tout le reste</em>.</li> <li><strong>Automatique</strong> pour le déploiement.</li> <li><strong>Contrôle total</strong> du site et surtout de sa mise en page.</li> <li><strong>Accessible</strong> pour les débutants et évolutif pour les experts.</li> </ul> <h2 id=les-inconvnients>Les inconvénients</h2> <h3 id=le-media-manager>Le media manager</h3> <p>L'une des <em>killer feature</em> de wordpress est sa gestion des images. Un simple drag &amp; drop et vous pouvez ajouter une légende, les medias sont resizés en différentes tailles, et il est très facile de retrouver sa collection d'image. Avec un générateur de site statique c'est plus compliqué car héberger ses images sur gitthub n'a pas de sens. Pour avoir des performances optimales vous devez utiliser un <em>CDN</em> comme cloudfront, spécialisé dans le stockage.</p> <p>Personnellement j'utilise le CDN du pauvre : flickR. Avec 1 To de stockage disponible dans sa version gratuite, son retaillage des images et l'upload des photos en drag &amp; drop, je met quiquonque au défi de trouver mieux.</p> <blockquote> <p>Sur flickR, si vous souhaitez faire un lien vers une image en .gif ou .png, sélectionnez la taille par défaut de votre image</p> <p><cite>Conseil du pro</cite></p> </blockquote> <h3 id=la-correction-orthographique>La correction orthographique</h3> <p>Mon contenu est écrit en mode texte brut dans un éditeur de texte. Difficile d'avoir des outils de correction automatique dans cet environnement. Il m'arrive régulièrement de faire des fautes de frappes malgré ma relecture et je n'ai à ce jour pas trouvé de solution.</p> <h3 id=pas-de-base-de-donnes-1>Pas de base de données</h3> <p>J’ai écris plus haut que c’était un avantage. C'est aussi un inconvénient dans le mesure où vous devrez sortir l'artillerie et le workflow de deploiement simplement pour corriger un "s" manquant. Avec wordpress il suffit de se connecter à l'interface d'admin et c'est corrigé en 2-3 clics.</p> <h2 id=au-revoir-wordpress-et-bonjour-middleman>Au revoir wordpress et bonjour middleman</h2> <p>Rome ne s’est pas construite en un jour et migrer l’intégralité de votre contenu vous demandera un peu d'investissement (Personnellement cela m’a pris un peu plus d’un mois) Voici 3 étapes qui vous feront gagner du temps :</p> <h3 id=transformer-ses-articles-en-markdown>1. Transformer ses articles en markdown</h3> <p>Exitwp est un outil pour <a href="https://github.com/thomasf/exitwp">migrer un ou plusieurs blogs wordpress</a> vers le moteur de blog jekyll (un autre moteur de blog en ruby).</p> <h3 id=utiliser-un-cdn-pour-les-images>2. Utiliser un CDN pour les images</h3> <p>Flickr avec son offre 1 To est une bonne alternative à un vrai CDN. L’avantage principal est la création des différentes tailles d’images lors de l’upload.</p> <h3 id=raliser-un-plan-de-redirection>3. Réaliser un plan de redirection</h3> <p>Si vous ne souhaitez pas perdre la popularité associé à vos pages, vous devez faire des redirections 301. Le remercie <a href="https://twitter.com/rduhomez">@rduhomez</a>, référenceur de talent, pour m'avoir épargné quelques crises de nerf avec ses précieux conseils. J'ai simplement réalisé un export de toutes mes anciennes url et mis en place des redirections avec le pattern suivant :</p> <pre><code>Redirect permanent /wordPress/about/ http://davidl.fr/about.html
</code></pre> <p>Cette méthode peut être largement optimisée, et j'ai certainement perdu quelques morceaux dans la bataille, mais mon objectif principal et de produire du contenu &amp; du code. De toute façon le SEO ça ne sert à rien ;) #privatejoke</p> <h2 id=conclusion>Conclusion</h2> <p>Ce système n'est pas adapté à tout le monde, et il faut une certaine philosophie de hacker / développeur / githuber pour travailler de cette façon. Dans mon cas, j'ai remarqué que c'est beaucoups plus efficace. Couplé avec bower je peux tester n'importe quelle fonctionnalité très rapidement comme les <a href="//davidl.fr">filtres avec mixitup</a>, les <a href="//davidl.fr/webdesign.html">vidéos en background</a>, changer complètement <a href="//davidl.fr/books.html">l'aspect du layout</a> et utiliser des données de fichiers <code>.yml</code> pour être évolutif …</p> <h2 id=ressources>Ressources</h2> <ul> <li><a href="https://github.com/thomasf/exitwp">exitwp</a></li> <li><a href="//davidl.fr/blog/hebergement-gratuit-ovh.html">Héberger son site sur GitHub</a></li> </ul> <div class=row><div class="medium-8 medium-centered columns"><div class=m-blog-panel itemprop=author itemscope="" itemtype="http://schema.org/Person"><div class=row><div class="small-4 columns"><img itemprop=image src="../assets/images/front/photo2-225aeeb9.jpg"/></div><div class="small-8 columns"><p>Publié par <a href="https://plus.google.com/u/0/113401424510170217860?rel=author" itemprop=name>David Leuliette </a></p><p><div class="fa fa-twitter"></div><a href="https://twitter.com/_flexbox">@_flexbox</a> sur twitter </p><p><div class="fa icon-rss"></div><a href="/feed.xml">S'incrire au flux RSS</a></p></div></div></div></div></div></div></article></div><a class=exit-off-canvas></a><footer class=m-footer><div class=row><div class="small-12 columns"><p class=m-go-top><a href="#top"><i class="i-custom fa fa-arrow-up"></i>Haut de page </a></p></div></div><div class=row><div class="medium-12 columns"><p class=m-footer--title>Intéressé par ce contenu ?</p><p>Recevez des conseils sur le développement front-end. Ne vous inquétez pas je déteste le spam, il suffit d'un clic pour se désabonner.</p><form action="//davidl.us3.list-manage2.com/subscribe/post?u=b72e60a9116993dde8d1547fe&amp;id=e99fbeb8ad" method=post name=mc-embedded-subscribe-form target=_blank><div class=row><div class="small-12 columns"><label for=js-mailchimpemail>S'abonner pour ne pas manquer les nouvelles publications </label></div></div><div class="row collapse"><div class="small-8 columns"><input class=m-mailchimpemail id=js-mailchimpemail name=EMAIL placeholder="Saisissez votre adresse e-mail" required="" type=email /><div class=hide><input name=b_b72e60a9116993dde8d1547fe_e99fbeb8ad /></div></div><div class="small-4 columns"><input class="button postfix" id=mc-embedded-subscribe name=subscribe type=submit value="S'inscrire"/></div></div></form></div></div><div class=row><div class="medium-12 columns"><p class=text-right>Ce site est rédigé et administré par <a href="/human.txt">David Leuliette</a></p><p class=text-right><a title="Voir le plan du site" href="/sitemap.html">Plan</a>&bull; <a href="/legal.html">Mentions légales</a> &bull; <a title="Aller au contenu" href="#js-content">Contenu</a>&bull; <a title="Politique d'accessibilité" href="/manifesto.html#js-accessibility">Accessibilité</a></p></div></div></footer></div></div><script src="../assets/javascripts/application-298e650a.js"></script><script>(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>