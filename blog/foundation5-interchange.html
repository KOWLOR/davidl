<!DOCTYPE html><html lang=fr xmlns:fb="https://www.facebook.com/2008/fbml" xmlns:og="http://ogp.me/ns#"><head><meta charset=utf-8 /><meta content="width=device-width" name=viewport /><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible /><title>Foundation 5, interchange et Google maps &bull; DavidL design + développement</title><meta content="" name=description /><meta content="index,follow" name=robots /><meta content="DavidL design + développement" property="og:site_name"/><meta content=website property="og:type"/><meta content="http://davidl.fr" property="og:url"/><meta content="Foundation 5, interchange et Google maps" property="og:title"/><meta content="" property="og:description"/><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" property="og:image"/><meta content="DavidL design + développement" name="twitter:card"/><meta content="@_flexbox" name="twitter:site"/><meta content="Foundation 5, interchange et Google maps" name="twitter:title"/><meta content="" name="twitter:description"/><meta content="David Leuliette" name="twitter:creator"/><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" name="twitter:image:src"/><meta content="http://davidl.fr" name="twitter:domain"/><meta content="Foundation 5, interchange et Google maps" itemprop=name /><meta content="" itemprop=description /><meta content="http://davidl.fr/apple-touch-icon-144x144-precomposed.png" itemprop=image /><link href="https://plus.google.com/u/0/113401424510170217860" rel=publisher /><link href="/feed.xml" rel=alternate title="DavidL design + développement" type="application/rss+xml"/><link href="/apple-touch-icon.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-57x57-precomposed.png" rel=apple-touch-icon sizes=57x57 /><link href="/apple-touch-icon-60x60-precomposed.png" rel=apple-touch-icon sizes=60x60 /><link href="/apple-touch-icon-72x72-precomposed.png" rel=apple-touch-icon sizes=72x72 /><link href="/apple-touch-icon-76x76-precomposed.png" rel=apple-touch-icon sizes=76x76 /><link href="/apple-touch-icon-114x114-precomposed.png" rel=apple-touch-icon sizes=114x114 /><link href="/apple-touch-icon-120x120-precomposed.png" rel=apple-touch-icon sizes=120x120 /><link href="/apple-touch-icon-144x144-precomposed.png" rel=apple-touch-icon sizes=144x144 /><link href="/apple-touch-icon-152x152-precomposed.png" rel=apple-touch-icon sizes=152x152 /><link href="/favicon-196x196.png" rel=icon sizes=196x196 type="image/png"/><link href="/favicon-160x160.png" rel=icon sizes=160x160 type="image/png"/><link href="/favicon-96x96.png" rel=icon sizes=96x96 type="image/png"/><link href="/favicon-32x32.png" rel=icon sizes=32x32 type="image/png"/><link href="/favicon-16x16.png" rel=icon sizes=16x16 type="image/png"/><meta content="#f5f5f5" name=msapplication-TileColor /><meta content="/mstile-144x144.png" name=msapplication-TileImage /><link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700|Lato:900" media=screen rel=stylesheet /><link href="../assets/stylesheets/application-e6748e5e.css" media=screen rel=stylesheet /><link href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css" media=screen rel=stylesheet /><script>var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-46684635-1']);
_gaq.push(['_trackPageview']);</script></head><body><section class=m-masterhead--nav><div class=row><div class="medium-12 columns"><ul class="inline-list right"><li><a title="Aller au contenu" href="#js-content">Contenu</a></li><li><a title="Politique d'accessibilité" href="/manifesto.html#js-accessibility">Accessibilité</a></li><li><a title="Voir le plan du site" href="/plan-du-site.html">Plan</a></li></ul></div></div></section><section class=m-masterhead--background><div class=row id=top><div class="medium-12 columns"><h1 class=m-masterhead>Utiliser interchange pour charger dynamiquement le bon HTML pour le bon navigateur</h1><a href="#js-content"><i class="fa fa-4x fa-angle-down"></i></a></div></div></section><div id=js-content></div><div class=row><div class="medium-2 medium-offset-10 columns"><p class=m-post-list--calendar><i class="fa fa-calendar i-custom fa-lg"></i><span class=l-day>24</span>.<span class=l-month>01</span>.<span class=l-year>2014</span></p></div></div><article class=row itemscope="" itemtype="http://schema.org/BlogPosting"><div class="medium-8 medium-centered columns blog-article" itemprop=articleBody><p>Dans le framework foundation <a href="//foundation.zurb.com/docs/components/visibility.html">les classes de visibilité</a> permettent d'afficher ou de masquer des éléments qui sont pertinent en fonction des appareils. Par exemple, j’affiche une petite image sur un téléphone et une version plus grande pour les ordinateurs. Dans un autre cas je souhaite masquer le menu de navigation au profit de petites icônes. Les classes de visibilité permettent de masquer les éléments inappropriés pour chaque <code>viewport</code>.</p> <p>Le problème c’est que les utilisateurs doivent télécharger les 2 versions. C’est une perte de temps, de mémoire navigateur et de bande passante. Interchange permet de régler ce problème et c’est la façon la plus simple de sélectionner du contenu basé sur vos <code>mediaquery</code> Avec interchange chaque navigateur télécharge ce qu’il ont besoin non pas ce qu’iil est possible de télécharger. Dans cet article je vais expliquer comment mettre en place cette solution pour utiliser interchange avec votre contenu HTML.</p> <p>Pour voir un exemple, je vous invite à visiter le site de cet <a href="//chambredesanges.be/">chambre d’hôte</a> à Bruxelles. Le contenu de ce site est <a href="https://github.com/css-ninja/chamber">disponible sur github</a>.</p> <h2 id=conventions-et-mises-en-garde>Conventions et mises en garde</h2> <p>J’utilise le langage de <a href="//slim-lang.com/">template slim</a> pour réduire ma syntaxe HTML (<code>#</code> pour <code>&lt;div id="..."&gt;</code> et <code>.</code> pour <code>&lt;div class="..."&gt;</code>)</p> <p>Interchange est assez souple, mais pour des raisons pratiques j’ai placé le contenu chargé par interchange dans le <a href="https://github.com/css-ninja/chamber/tree/master/source">dossier source</a> qui sera à la racine de mon site web. Pour une grosse application il est impératif d’architecturer correctement vos vues.</p> <h2 id=contenu-interactif>Contenu interactif</h2> <p>Dans cet exemple, j’utilise interchange pour :</p> <ul> <li>Afficher une image statique par défaut</li> <li>Afficher une google map interactive pour les écrans larges</li> </ul> <p>Je sépare ces vues dans 2 fichiers <code>maps-small.html.slim</code> et <code>maps-medium.html.slim</code></p> <p>Avec interchange je charge ce contenu dans ma vue <code>_map.html.slim</code></p> <p><a href="https://github.com/css-ninja/chamber/blob/master/source/maps-small.html.slim">maps-small.html.slim</a> : Charge le contenu par défaut</p> <p><a href="https://github.com/css-ninja/chamber/blob/master/source/maps-medium.html.slim">maps-medium.html.slim</a> : Chargez ce contenu sur grand écran (dans cet exemple avec une largeur supérieure à 600px) Commençons en activant interchange sur notre page. Nous allons ajouter un texte par défaut "Chargement de la carte …" :</p> <pre><code>div data-interchange=""
  Chargement de la carte...
</code></pre> <p>Ensuite, nous allons modifier <code>data-interchange</code> pour lui dire quel est le contenu à charger en fonction de la <code>mediaquery</code></p> <pre><code>div data-interchange="[maps-small.html, (default)], [maps-medium.html, (large)]
  Chargement de la carte...
</code></pre> <p>Et voilà, la magie opère ! Regardez <a href="//chambredesanges.be/">cet exemple pour voir la carte</a>.</p> <h2 id=visibilit>Visibilité</h2> <p>Il y a des cas où vous souhaitez uniquement afficher certains contenus en fonction des tailles d'écran. Imaginez une galerie de photos. Avec <a href="//foundation.zurb.com/docs/components/visibility.html">les classes de visibilité</a>, vous pouvez masquer le contenu, mais il sera téléchargé en arrière-plan. Niveau performance c'est zéro !</p> <p>Avec interchange, il est possible de montrer / charger du contenu seulement sur les appareils appropriés. Pour afficher notre site plus rapidement sur les petits écrans, il est possible de ne rien télécharger.</p> <p>Dans ce cas notre vue <code>image_gallery.html.slim</code> est un carousel avec beaucoups d'images.</p> <p>So in this case we have a partials/image_gallery.html file that loads in a bunch of images. Pour n'afficher que ce contenu sur de grands écrans il suffit d'utiliser la balise suivante :</p> <pre><code>div data-interchange="[image_gallery.html, (large)]"
</code></pre> <p>NOTE : Si vous redimensionnez la fenêtre après que le contenu soit chargé, il ne sera pas automatiquement supprimé. Cela se produit s'il n'y a pas de requête de média correspondant.</p> <div class=row><div class="medium-8 medium-centered columns"><div class=m-blog-panel itemprop=author itemscope="" itemtype="http://schema.org/Person"><div class=row><div class="small-4 columns"><img itemprop=image src="../assets/images/front/photo2-225aeeb9.jpg"/></div><div class="small-8 columns"><p>Publié par <a href="https://plus.google.com/u/0/113401424510170217860?rel=author" itemprop=name>David Leuliette </a></p><p><div class="fa fa-twitter"></div><a href="https://twitter.com/_flexbox">@_flexbox</a> sur twitter </p><p><div class="fa icon-rss"></div><a href="/feed.xml">S'incrire au flux RSS</a></p></div></div></div></div></div></div></article><div class=row><div class="small-12 columns"><p class=m-go-top><a href="#top"><i class="i-custom fa fa-arrow-up"></i>Haut de page </a></p></div></div><footer class=m-footer><div class=row><div class="medium-8 columns"><form action="//davidl.us3.list-manage2.com/subscribe/post?u=b72e60a9116993dde8d1547fe&amp;id=e99fbeb8ad" method=post name=mc-embedded-subscribe-form target=_blank><div class=row><div class="small-12 columns"><label for=mce-EMAIL>Recevez <strong>des conseils </strong>sur le développement front-end. </label></div></div><div class="row collapse"><div class="small-8 columns"><input class=m-mailchimpemail id=js-mailchimpemail name=EMAIL placeholder="Saisissez votre adresse e-mail" required="" type=email /><div class=hide><input name=b_b72e60a9116993dde8d1547fe_e99fbeb8ad /></div></div><div class="small-4 columns"><input class="button postfix" id=mc-embedded-subscribe name=subscribe type=submit value="S'inscrire"/></div></div></form></div><div class="medium-4 columns"><p class=text-right>Ce site est rédigé et administré par <a href="/human.txt">David Leuliette</a></p><p class=text-right><a title="Voir le plan du site" href="/plan-du-site.html">Plan</a>&bull; <a href="/legal.html">Mentions légales</a> &bull; <a href="/CHANGELOG.html">Changelog</a> </p></div></div></footer><div data-interchange="[/control-small.html, (small)], [/control-medium.html, (medium)], [/control-medium.html, (large)]"></div><script src="../assets/javascripts/application-7f5b31dd.js"></script><script>(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();</script></body></html>